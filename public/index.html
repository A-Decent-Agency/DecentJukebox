<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3 JukeBox</title>
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/about-modal.css">
    <link rel="stylesheet" href="./styles/token-selection-modal.css">
    <link rel="stylesheet" href="./styles/loader.css">
    <link rel="icon" href="./assets/favicon.ico">
    <script src="./ethers.umd.min.js"></script>
</head>
<body>
    <!-- Loader -->
    <div id="loader" class="">
        <div class="loadagon">
            <!-- Hexagon Layout Icons -->
            <img src="./assets/IPFS_Logo.png" alt="Top Icon" class="loader-img spin-slow top-icon" />
            <img src="./assets/PolygonLogo.png" alt="Top Right Icon" class="loader-img" />
            <img src="./assets/IPFS_Logo.png" alt="Bottom Right Icon" class="loader-img" />
            <img src="./assets/PolygonLogo.png" alt="Bottom Icon" class="loader-img spin-slow bottom-icon" />
            <img src="./assets/IPFS_Logo.png" alt="Bottom Left Icon" class="loader-img" />
            <img src="./assets/PolygonLogo.png" alt="Top Left Icon" class="loader-img" />
        </div>
            <!-- Center Text -->
            <div class="loader-text">Loading...</div>
    </div>

    <!-- Wallet Display -->
    <div id="wallet-display" class="wallet-display hidden"></div>
    <div id="contract-display" class="hidden">
        <a href="#" target="_blank" id="contract-link">View Contract</a>
    </div>

    <!-- Landing Page -->
    <div id="landing" class="video-container">
        <video autoplay muted loop id="landing-video">
            <source src="./assets/landing.mp4" type="video/mp4">
        </video>
        <button id="connect-wallet" class="centered-button">Connect Wallet</button>
        <button id="enter-controls" class="centered-button hidden">Enter Jukebox</button>
    </div>

    <!-- Controls View -->
    <div id="controls" class="video-container hidden">
        <video autoplay muted id="controls-video">
            <source src="./assets/controls.mp4" type="video/mp4">
        </video>


        <div id="lcd-screen-left" class="lcd-screen-left">
            <div id="album-list" class="scrollable-container"></div>
        </div>
        <div id="controls-overlay" class="controls-overlay" >
            <button id="add-album">Add Album</button>
        </div>


        <div id="lcd-screen-right" class="lcd-screen-right">
            <div id="song-list" class="scrollable-container"></div>
        </div>
        <div id="right-lcd-buttons" class="right-lcd-buttons">
            <button id="play-song">Play Song</button>
            <button id="play-album">Play Album</button>
        </div>

        <div id="add-album-modal" class="modal hidden">
            <div class="modal-content">
                <span id="modal-close" class="close-button">&times;</span>
                <h2>Add Album</h2>
                <form>
                    <input id="album-name" type="text" placeholder="Album Name" required />
                    <input id="album-cid" type="text" placeholder="CID (IPFS)" required />
                    <input id="album-owner" type="text" placeholder="Album Owner Address" required />
                    <input id="payment-tokens" type="text" placeholder="Payment Tokens (comma-separated)" required />
                    <input id="play-fee" type="number" placeholder="Play Fee" step="any" required />
                    <input id="whole-album-fee" type="number" placeholder="Whole Album Fee" step="any" required />
                    <div id="error-message" style="color: red; font-size: 14px; margin-top: 10px;"></div> <!-- Error message container -->
                    <button type="button" id="submit-album">Submit</button>
                </form>
            </div>
        </div>


        <div id="track-token-selection-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Play Album</h2><hr><br>
                <h4>Select a Track</h4>
                <div id="track-list" class="track-list"></div>
                <h4>Choose a payment token</h4>
                <div id="track-token-list" class="token-list"></div>
                <button id="confirm-selection-track" class="confirm-selection">Confirm</button>
                <button id="cancel-selection-track" class="confirm-selection" >Cancel</button>
            </div>
        </div>

        <div id="token-selection-modal" class="modal hidden">
            <div class="modal-content">
                <h4>Choose a payment token</h4>
                <div id="album-token-list" class="token-list"></div>
                <button id="confirm-selection-album" class="confirm-selection">Confirm</button>
                <button id="cancel-selection-album" class="confirm-selection">Cancel</button>
            
            </div>
        </div>

        <div id="modal-overlay" class="hidden"></div>

    </div>

    <!-- Spinning Record View -->
    <div id="record" class="video-container hidden">
        <video autoplay muted loop id="record-video">
            <source src="./assets/spinning.mp4" type="video/mp4">
        </video>

        <video id="video-player" class="video-player hidden" controls autoplay></video>
        <audio id="audio-player" controls autoplay></audio>

        <button id="back-to-controls" class="centered-button">Back to Controls</button>
    </div>

    <!-- About Modal -->
    <div id="about-modal" class="about-modal hidden">
        <div class="modal-content">
            <span id="about-modal-close" class="close-button">&times;</span>
            <h1>About Decent JukeBox</h1>
            <p>This ain't your Grandma's Jukebox, Marty McFly!</p>
            <p>Decent JukeBox is a Web3 JukeBox of the future.</p>
            
            <h2>To Load an Album:</h2>
            <p>
                Load some audio files onto IPFS and then pay the gas for Decent Jukebox to store the CID on a public ledger!
                You'll be asked to declare an album owner (wallet address). You'll also be asked to choose a single play fee
                and an album play fee - as well as to add a list of tokens you want to accept for payment. These amounts and
                token addresses are what it will cost to play your audio files back through the JukeBox. The JukeBox owner will
                retain a 10% fee, and 90% will go to the owner of the album.
            </p>
            <h2>To Play an Album:</h2>
            <p>
                You'll need to connect your metamask wallet to the JukeBox and then you can select an album from the list of albums
                that have been loaded. You'll be asked to pay the play fee in the token of your choice, and then the album
                will play. You can also pay the album fee, and the whole album will play through. The JukeBox will retain a
                10% fee, and 90% will go to the owner of the album.
            </p>
            <br>
            <h4>Inspect the contract at the address below:</h4>
            <a class="jukebox-home-link" href="https://polygonscan.com/address/0x180Cf8CB681a083A73c997809FF60Df857010bF9" target="_blank">
                A Decent JukeBox V1.1 on Polygon
            </a>
            <br>
            <br>
            <h4>Checkout the project GitHub at the address below:</h4>
            <a class="jukebox-home-link" href="https://github.com/TheJollyLaMa/JollyJukeBox" target="_blank">
                Jolly Decent JukeBox for MTCG on GitHub
            </a>
            <br><br>
            <h2>ðŸŽ¶ðŸŽ¶ Enjoy the Tunes! ðŸŽ¶ðŸŽ¶</h2>
            <button id="jukebox-home-link" class="jukebox-home-link">ðŸŽµ Back to the JukeBox ðŸŽµ</button>
            <br>
            <br>
            <div align="center">
                <img src="https://bafybeififxtnn4lyvw72l4l7p2ux2qiumsgm4y6zmjf3jryhmzxhzifwym.ipfs.w3s.link/Github_Logo.png" alt="GitHub Logo" width="50" height="50">
                <img src="https://bafybeih7e5eyvfs64oimtn5ywti2lovl3ydysq5mcoxbefpx2qkly4rdrq.ipfs.w3s.link/web3storage.png" alt="web3.storage Logo" width="50" height="50">
                <img src="https://bafybeic5bvnkjejuxbogn2n7lyzfyf5l6glgzrxkidjwj4yvhyci5haoca.ipfs.w3s.link/PolygonLogo.png" alt="web3.storage Logo" width="50" height="50">
                <img src="https://bafybeig67sj4te7xkz5ku67ksnhxdfzikblc77gsecv53owxe6b4z5aega.ipfs.w3s.link/MintMeLogo.png" alt="MintMe Logo" width="50" height="50">
                <img src="https://bafybeigr6ri2ythjbciusgjdvimjt74caymflc5ut4rmtrkhcoi2cr53ua.ipfs.w3s.link/DecentSmartHome.png" alt="DecentSmartHome Logo" width="50" height="50">
                <img src="https://bafybeifej4defs5s5wryxylmps42c7xkbzle3fxjgnsbb5hcfnd5b77zwa.ipfs.w3s.link/Ens_Eth_Breathe.gif" alt="Ens_Eth_Breathe Logo" width="50" height="50">
                <img src="https://bafybeie7l66frjp4im2xrsd3wxlhwcve4bxuxqrvs6i3a33untc6mwwkgm.ipfs.w3s.link/node_logo.png" alt="Node Logo" width="50" height="50">
                <img src="https://bafybeicpv5ao6nyxhdln45jrd4gslyhrsagq72vvzmdpb2tsbm2vkz5jc4.ipfs.w3s.link/solidity.png" alt="Solidity Logo" width="50" height="50">
                <img src="https://bafybeidxx2mbmne45dqr5c572ynzly6asn7qns6uvdyhak7576nygcu4ym.ipfs.w3s.link/IPFS_Logo.png" alt="IPFS Logo" width="50" height="50">
                <img src="https://bafybeicft2vkf4jfqex4j2xjr5t2yzrdlticyboc2gbf325ztjqpv5ng24.ipfs.w3s.link/MetaMaskFox.png" alt="MetaMask Logo" width="50" height="50">
                <br>
                Keep Your Data Decent!
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script type="module" src="./app.js"></script>
</body>
</html>